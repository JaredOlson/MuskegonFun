/**
 * @license RequireJS domReady 2.0.0 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/**
 * jQuery Masonry v2.1.05
 * A dynamic layout plugin for jQuery
 * The flip-side of CSS Floats
 * http://masonry.desandro.com
 *
 * Licensed under the MIT license.
 * Copyright 2012 David DeSandro
 */

/*
   * smartresize: debounced resize event for jQuery
   *
   * latest version and complete README available on Github:
   * https://github.com/louisremi/jquery.smartresize.js
   *
   * Copyright 2011 @louis_remi
   * Licensed under the MIT license.
   */

/*!
   * jQuery imagesLoaded plugin v1.1.0
   * http://github.com/desandro/imagesloaded
   *
   * MIT License. by Paul Irish et al.
   */

/*

Copyright (c) 2009 Dimas Begunoff, http://www.farinspace.com

Licensed under the MIT license
http://en.wikipedia.org/wiki/MIT_License

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.

*/

/*!
 * jQuery.ScrollTo
 * Copyright (c) 2007-2009 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * Date: 06/05/2009
 *
 * @projectDescription Easy element scrolling using jQuery.
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 * Works with jQuery +1.2.6. Tested on FF 2/3, IE 6/7/8, Opera 9.5/6, Safari 3, Chrome 1 on WinXP.
 *
 * @author Ariel Flesler
 * @version 1.4.2
 *
 * @id jQuery.scrollTo
 * @id jQuery.fn.scrollTo
 * @param {String, Number, DOMElement, jQuery, Object} target Where to scroll the matched elements.
 *	  The different options for target are:
 *		- A number position (will be applied to all axes).
 *		- A string position ('44', '100px', '+=90', etc ) will be applied to all axes
 *		- A jQuery/DOM element ( logically, child of the element to scroll )
 *		- A string selector, that will be relative to the element to scroll ( 'li:eq(2)', etc )
 *		- A hash { top:x, left:y }, x and y can be any kind of number/string like above.
 *		- A percentage of the container's dimension/s, for example: 50% to go to the middle.
 *		- The string 'max' for go-to-end. 
 * @param {Number, Function} duration The OVERALL length of the animation, this argument can be the settings object instead.
 * @param {Object,Function} settings Optional set of settings or the onAfter callback.
 *	 @option {String} axis Which axis must be scrolled, use 'x', 'y', 'xy' or 'yx'.
 *	 @option {Number, Function} duration The OVERALL length of the animation.
 *	 @option {String} easing The easing method for the animation.
 *	 @option {Boolean} margin If true, the margin of the target element will be deducted from the final position.
 *	 @option {Object, Number} offset Add/deduct from the end position. One number for both axes or { top:x, left:y }.
 *	 @option {Object, Number} over Add/deduct the height/width multiplied by 'over', can be { top:x, left:y } when using both axes.
 *	 @option {Boolean} queue If true, and both axis are given, the 2nd axis will only be animated after the first one ends.
 *	 @option {Function} onAfter Function to be called after the scrolling ends. 
 *	 @option {Function} onAfterFirst If queuing is activated, this function will be called after the first scrolling ends.
 * @return {jQuery} Returns the same jQuery object, for chaining.
 *
 * @desc Scroll to a fixed position
 * @example $('div').scrollTo( 340 );
 *
 * @desc Scroll relatively to the actual position
 * @example $('div').scrollTo( '+=340px', { axis:'y' } );
 *
 * @desc Scroll using a selector (relative to the scrolled element)
 * @example $('div').scrollTo( 'p.paragraph:eq(2)', 500, { easing:'swing', queue:true, axis:'xy' } );
 *
 * @desc Scroll to a DOM element (same for jQuery object)
 * @example var second_child = document.getElementById('container').firstChild.nextSibling;
 *			$('#container').scrollTo( second_child, { duration:500, axis:'x', onAfter:function(){
 *				alert('scrolled!!');																   
 *			}});
 *
 * @desc Scroll on both axes, to different values
 * @example $('div').scrollTo( { top: 300, left:'+=200' }, { axis:'xy', offset:-20 } );
 */

timely.define("domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t++)e[t](n)}function a(){var e=r;t&&e.length&&(r=[],u(e))}function f(){t||(t=!0,o&&clearInterval(o),a())}function c(e){return t?e(n):r.push(e),c}var e=typeof window!="undefined"&&window.document,t=!e,n=e?document:null,r=[],i,s,o;if(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),s=document.createElement("div");try{i=window.frameElement===null}catch(l){}s.doScroll&&i&&window.external&&(o=setInterval(function(){try{s.doScroll(),f()}catch(e){}},30))}(document.readyState==="complete"||document.readyState==="interactive")&&f()}return c.version="2.0.0",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),timely.define("scripts/calendar/print",["jquery"],function(e){function i(){e("#ai1ec-print-button").toggle(e(".ai1ec-agenda-view").length!==0)}var t=function(){var e=window.location.href,t=window.location.hash,n=e.indexOf(t)||e.length,r=e.substr(0,n);return r},n=function(e){return e+(e.indexOf("?")==-1?"?print=true":"&print=true")},r=function(e){e.preventDefault();var r=t(),i=n(r)+window.location.hash;window.open(i,"Print-page")};return{toggle_print_button:i,handle_click_on_print_button:r,add_print_true_as_a_get_variable:n,get_hashless_url:t}}),timely.define("libs/jquery.masonry",["jquery"],function(e){(function(e,t,n){var r=t.event,i;r.special.smartresize={setup:function(){t(this).bind("resize",r.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",r.special.smartresize.handler)},handler:function(e,n){var r=this,s=arguments;e.type="smartresize",i&&clearTimeout(i),i=setTimeout(function(){t.event.handle.apply(r,s)},n==="execAsap"?0:100)}},t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])},t.Mason=function(e,n){this.element=t(n),this._create(e),this._init()},t.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},t.Mason.prototype={_filterFindBricks:function(e){var t=this.options.itemSelector;return t?e.filter(t).add(e.find(t)):e},_getBricks:function(e){var t=this._filterFindBricks(e).css({position:"absolute"}).addClass("masonry-brick");return t},_create:function(n){this.options=t.extend(!0,{},t.Mason.settings,n),this.styleQueue=[];var r=this.element[0].style;this.originalStyle={height:r.height||""};var i=this.options.containerStyle;for(var s in i)this.originalStyle[s]=r[s]||"";this.element.css(i),this.horizontalDirection=this.options.isRTL?"right":"left",this.offset={x:parseInt(this.element.css("padding-"+this.horizontalDirection),10),y:parseInt(this.element.css("padding-top"),10)},this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth=="function";var o=this;setTimeout(function(){o.element.addClass("masonry")},0),this.options.isResizable&&t(e).bind("smartresize.masonry",function(){o.resize()}),this.reloadItems()},_init:function(e){this._getColumns(),this._reLayout(e)},option:function(e,n){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))},layout:function(e,t){for(var n=0,r=e.length;n<r;n++)this._placeBrick(e[n]);var i={};i.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var s=0;n=this.cols;while(--n){if(this.colYs[n]!==0)break;s++}i.width=(this.cols-s)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:i});var o=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",u=this.options.animationOptions,a;for(n=0,r=this.styleQueue.length;n<r;n++)a=this.styleQueue[n],a.$el[o](a.style,u);this.styleQueue=[],t&&t.call(e),this.isLaidOut=!0},_getColumns:function(){var e=this.options.isFitWidth?this.element.parent():this.element,t=e.width();this.columnWidth=this.isFluid?this.options.columnWidth(t):this.options.columnWidth||this.$bricks.outerWidth(!0)||t,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((t+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(e){var n=t(e),r,i,s,o,u;r=Math.ceil(n.outerWidth(!0)/this.columnWidth),r=Math.min(r,this.cols);if(r===1)s=this.colYs;else{i=this.cols+1-r,s=[];for(u=0;u<i;u++)o=this.colYs.slice(u,u+r),s[u]=Math.max.apply(Math,o)}var a=Math.min.apply(Math,s),f=0;for(var l=0,c=s.length;l<c;l++)if(s[l]===a){f=l;break}var h={top:a+this.offset.y};h[this.horizontalDirection]=this.columnWidth*f+this.offset.x,this.styleQueue.push({$el:n,style:h});var p=a+n.outerHeight(!0),d=this.cols+1-c;for(l=0;l<d;l++)this.colYs[f+l]=p},resize:function(){var e=this.cols;this._getColumns(),(this.isFluid||this.cols!==e)&&this._reLayout()},_reLayout:function(e){var t=this.cols;this.colYs=[];while(t--)this.colYs.push(0);this.layout(this.$bricks,e)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(e){this.reloadItems(),this._init(e)},appended:function(e,t,n){if(t){this._filterFindBricks(e).css({top:this.element.height()});var r=this;setTimeout(function(){r._appended(e,n)},1)}else this._appended(e,n)},_appended:function(e,t){var n=this._getBricks(e);this.$bricks=this.$bricks.add(n),this.layout(n,t)},remove:function(e){this.$bricks=this.$bricks.not(e),e.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var n=this.element[0].style;for(var r in this.originalStyle)n[r]=this.originalStyle[r];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),t(e).unbind(".masonry")}},t.fn.imagesLoaded=function(e){function u(){e.call(n,r)}function a(e){var n=e.target;n.src!==s&&t.inArray(n,o)===-1&&(o.push(n),--i<=0&&(setTimeout(u),r.unbind(".imagesLoaded",a)))}var n=this,r=n.find("img").add(n.filter("img")),i=r.length,s="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",o=[];return i||u(),r.bind("load.imagesLoaded error.imagesLoaded",a).each(function(){var e=this.src;this.src=s,this.src=e}),n};var s=function(t){e.console&&e.console.error(t)};t.fn.masonry=function(e){if(typeof e=="string"){var n=Array.prototype.slice.call(arguments,1);this.each(function(){var r=t.data(this,"masonry");if(!r){s("cannot call methods on masonry prior to initialization; attempted to call method '"+e+"'");return}if(!t.isFunction(r[e])||e.charAt(0)==="_"){s("no such method '"+e+"' for masonry instance");return}r[e].apply(r,n)})}else this.each(function(){var n=t.data(this,"masonry");n?(n.option(e||{}),n._init()):t.data(this,"masonry",new t.Mason(e,this))});return this}})(window,e)}),timely.define("scripts/calendar/posterboard_view",["jquery","libs/jquery.masonry"],function(e,t){var n=function(){e(".ai1ec-posterboard-view").masonry({itemSelector:".ai1ec-event:visible",isFitWidth:!0,columnWidth:240})},r=function(){e(".ai1ec-posterboard-view").masonry("reload")};return{initialize_masonry:n,reload_masonry:r}}),timely.define("scripts/calendar/agenda_view",["jquery"],function(e){var t=function(){e(this).closest("li.ai1ec-event:not(.ai1ec-expanded)").toggleClass("ai1ec-expanded").find(".ai1ec-event-summary").slideToggle().end().find(".ai1ec-event-expand > i").toggleClass("icon-plus-sign icon-minus-sign")},n=function(){e(this).closest("li.ai1ec-event").toggleClass("ai1ec-expanded").find(".ai1ec-event-summary").slideToggle().end().find(".ai1ec-event-expand > i").toggleClass("icon-plus-sign icon-minus-sign")},r=function(){e(".ai1ec-expanded .ai1ec-event-click").click()},i=function(){e("li.ai1ec-event:not(.ai1ec-expanded) .ai1ec-event-click").click()};return{expand_event:t,toggle_event:n,collapse_all:r,expand_all:i}}),timely.define("libs/modernizr",[],function(){var e=function(e,t,n){function S(e){f.cssText=e}function x(e,t){return S(h.join(e+";")+(t||""))}function T(e,t){return typeof e===t}function N(e,t){return!!~(""+e).indexOf(t)}function C(e,t,r){for(var i in e){var s=t[e[i]];if(s!==n)return r===!1?e[i]:T(s,"function")?s.bind(r||t):s}return!1}var r="2.5.3",i={},s=!0,o=t.documentElement,u="modernizr",a=t.createElement(u),f=a.style,l,c={}.toString,h=" -webkit- -moz- -o- -ms- ".split(" "),p={},d={},v={},m=[],g=m.slice,y,b=function(e,n,r,i){var s,a,f,l=t.createElement("div"),c=t.body,h=c?c:t.createElement("body");if(parseInt(r,10))while(r--)f=t.createElement("div"),f.id=i?i[r]:u+(r+1),l.appendChild(f);return s=["&#173;","<style>",e,"</style>"].join(""),l.id=u,(c?l:h).innerHTML+=s,h.appendChild(l),c||(h.style.background="",o.appendChild(h)),a=n(l,e),c?l.parentNode.removeChild(l):h.parentNode.removeChild(h),!!a},w={}.hasOwnProperty,E;!T(w,"undefined")&&!T(w.call,"undefined")?E=function(e,t){return w.call(e,t)}:E=function(e,t){return t in e&&T(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError;var r=g.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=n.prototype;var s=new e,o=n.apply(s,r.concat(g.call(arguments)));return Object(o)===o?o:s}return n.apply(t,r.concat(g.call(arguments)))};return i});var k=function(n,r){var s=n.join(""),o=r.length;b(s,function(n,r){var s=t.styleSheets[t.styleSheets.length-1],u=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"",a=n.childNodes,f={};while(o--)f[a[o].id]=a[o];i.touch="ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch||(f.touch&&f.touch.offsetTop)===9},o,r)}([,["@media (",h.join("touch-enabled),("),u,")","{#touch{top:9px;position:absolute}}"].join("")],[,"touch"]);p.touch=function(){return i.touch};for(var L in p)E(p,L)&&(y=L.toLowerCase(),i[y]=p[L](),m.push((i[y]?"":"no-")+y));return S(""),a=l=null,i._version=r,i._prefixes=h,i.testStyles=b,o.className=o.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(s?" js "+m.join(" "):""),i}(window,window.document);return e}),timely.define("scripts/calendar/month_view",["jquery","libs/modernizr"],function(e,t){var n=function(){i();var t=e(".ai1ec-day");e(".ai1ec-month-view .ai1ec-multiday:visible").each(function(){var n=this.parentNode,i=e(this).outerHeight(!0),s=e(n).width()+1,o=e(".ai1ec-event-title",this).first(),u=e(this).data("endDay"),a=e(".ai1ec-date",n),f=a.html(),l=e(this).data("endTruncated");l&&(u=e(".ai1ec-date",t[t.length-1]).html());var c=e(this),h=e(".ai1ec-event",c)[0].style.backgroundColor,p=0,d=u-f+1,v=d,m=0;t.each(function(i){var s=e(".ai1ec-date",this),o=e(this.parentNode);cellNum=o.index();var a=parseInt(s.html());if(a>=f&&a<=u){a==f&&(marginSize=parseInt(s.css("marginBottom"))+16);if(cellNum!=0)p==0&&(m=o.offset().left+o.width()-e(n).offset().left);else if(a>f&&v!=0){var l=c.clone(!1);s.parent().append(l),l.addClass("ai1ec-multiday-bar ai1ec-multiday-clone"),l.css({position:"absolute",left:"1px",top:parseInt(s.css("marginBottom"))+13,backgroundColor:h});var d=v>7?i+7-1:i+v-1,g=e(t[d]).offset().left+e(t[d]).width()-e(t[d].parentNode.parentNode).offset().left;l.css("width",g-3),v>7&&l.append(r(1,h)),l.append(r(2,h)),p++}p==0?s.css({marginBottom:marginSize+"px"}):s.css({marginBottom:"+=16px"}),v--}});if(l){var g=e("."+c[0].className.replace(/\s+/igm,".")).last();g.append(r(1,h))}e(this).css({position:"absolute",top:a.outerHeight(!0)-i-1+"px",left:"1px",width:m+"px"}),p>0&&e(this).append(r(1,h)),e(this).data("startTruncated")&&e(this).append(r(2,h)).addClass("ai1ec-multiday-bar")})},r=function(t,n){var r=e('<div class="ai1ec-multiday-arrow'+t+'"></div>');return t==1?r.css({borderLeftColor:n}):r.css({borderTopColor:n,borderRightColor:n,borderBottomColor:n}),r},i=function(){var t=e(".ai1ec-month-view");e(".ai1ec-date",t).each(function(){e(this).css({marginBottom:"1px"})}),e(".ai1ec-multiday-clone",t).remove(),e(".ai1ec-multiday",t).each(function(){s(this)})},s=function(t){e(t).css({position:"relative",left:"auto",top:"auto",width:"auto"});var n="."+t.className.replace(/\s+/igm,".")+".ai1ec-multiday-clone";e(n).remove(),e(".ai1ec-multiday-arrow1, ai1ec-multiday-arrow2",t).remove()},o=function(){e(".ai1ec-month-view .ai1ec-event-dropdown").each(function(){var t=this.parentNode;e(this).find(".ai1ec-event-container").each(function(){t.appendChild(this)})}),e(".ai1ec-month-view .ai1ec-event-dropdown").remove(),e(".ai1ec-month-view .ai1ec-scroll-down").remove()},u=function(){e(".ai1ec-month-view").length&&(o(),e(".ai1ec-month-view .ai1ec-day").each(function(){var n=5,i=80,o=-1,u=e(".ai1ec-event-container:visible",this);u.each(function(e){this.offsetTop>=i&&o==-1&&(o=e>1?e-1:0)});if(o!=-1){var a=document.createElement("div");a.className="ai1ec-event-dropdown",e(a).css({top:u[o].offsetTop,display:"none"});for(var f=o;f<u.length;f++)s(u[f]),e(u[f]).hasClass("ai1ec-multiday")&&e(u[f]).append(r(1,u[f].style.backgroundColor)),e(a).append(u[f]);$scroll_down=e('<a href="#" class="ai1ec-scroll-down"></a>'),$scroll_down.bind("hover click",function(){return e(a).fadeIn(100),!1});var l=e(this).find(".ai1ec-date");parseInt(l.css("marginBottom"))>i&&(l.css({marginBottom:i-15+"px"}),e(a).css({top:i+"px"})),e(this).append(a),e(this).append($scroll_down),t.touch?($scroll_up=e('<a href="#" class="ai1ec-scroll-up"></a>'),$scroll_up.bind("click",function(){return e(a).fadeOut(100),!1}),e(a).append($scroll_up)):e(a).bind("mouseleave",function(){e(this).fadeOut(100)})}}))};return{revert_multiday_events:i,extend_multiday_events:n}}),timely.define("scripts/calendar/pop_up",["jquery","libs/modernizr"],function(e,t){var n=999,r=function(){var r=e(this).prev();r.removeClass("ai1ec-event-popup-allround");if(e(this.parentNode).is(".ai1ec-multiday")){var s="."+this.parentNode.className.replace(" ai1ec-multiday-bar","").replace(/\s+/igm,"."),o=e(s);o.each(function(t){var n=e(".ai1ec-event-popup",o[t]);r[0]!=n[0]&&n.addClass("ai1ec-event-popup-allround").css("visibility","visible").fadeIn(100)})}if(!r.data("ai1ec_offset")){r.css("visibility","hidden").show();var u=e("#ai1ec-calendar-view-container"),a=r.width(),f=r.offset(),l=u.offset(),c=l.left+u.width(),h=e(".ai1ec-event-summary",r);f.left+a>c&&r.offset({left:c-a,top:f.top}),h.offset().left<l.left&&r.addClass("ai1ec-shifted-right"),r.hide().css("visibility","visible"),r.data("ai1ec_offset",!0)}r.css({"z-index":++n}).fadeIn(100,t.touch?null:function(){e(this).data("ai1ec_mouseinside")||e(this).each(i)});if(t.touch)return e(".ai1ec-month-view .ai1ec-event-popup, .ai1ec-week-view .ai1ec-event-popup").not(r).fadeOut(100,function(){e(this).parent().css({zIndex:"auto"})}),!1},i=function(){var t="."+this.parentNode.className.replace(" ai1ec-multiday-bar","").replace(/\s+/igm,"."),n=e(t+" .ai1ec-event-popup");e(n).fadeOut(100,function(){e(this).parent().css({zIndex:"auto"})}).data("ai1ec_mouseinside",!1)},s=function(){e(".ai1ec-month-view, .ai1ec-oneday-view, .ai1ec-week-view").length&&e(".ai1ec-event-popup:visible").each(i)},o=function(){e(this).data("ai1ec_mouseinside",!0)};return{hide_popup:i,show_popup:r,hide_popup_on_windows_blur_event:s,set_data_on_active_popup:o}}),timely.define("libs/frontend_utils",[],function(){var e=function(e){var t,n;t=function(e){if(/&[^;]+;/.test(e)){var t=document.createElement("div");return t.innerHTML=e,t.firstChild?t.firstChild.nodeValue:e}return e};if(typeof e=="string")return t(e);if(typeof e=="object")for(n in e)typeof e[n]=="string"&&(e[n]=t(e[n]));return e};return{ai1ec_convert_entities:e}}),timely.define("libs/jquery.tablescroller",["jquery"],function(e){function n(){if(t)return t;var n=e('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div></div>');e("body").append(n);var r=e("div",n).innerWidth();n.css("overflow-y","auto");var i=e("div",n).innerWidth();return e(n).remove(),t=r-i,t}var t=0;e.fn.tableScroll=function(t){if(t=="undo"){var r=e(this).parent().parent();r.hasClass("tablescroll_wrapper")&&(r.find(".tablescroll_head thead").prependTo(this),r.find(".tablescroll_foot tfoot").appendTo(this),r.before(this),r.empty());return}var i=e.extend({},e.fn.tableScroll.defaults,t);return i.scrollbarWidth=n(),this.each(function(){var t=i.flush,n=e(this).addClass("tablescroll_body"),r=e('<div class="tablescroll_wrapper"></div>').insertBefore(n).append(n);r.parent("div").hasClass(i.containerClass)||e("<div></div>").addClass(i.containerClass).insertBefore(r).append(r);var s=i.width?i.width:n.outerWidth();r.css({width:s+"px",height:i.height+"px",overflow:"auto"}),n.css("width",s+"px");var o=r.outerWidth(),u=o-s;r.css({width:s-u-2+"px"}),n.css("width",s-u-i.scrollbarWidth+"px"),n.outerHeight()<=i.height&&(r.css({height:"auto",width:s-u+"px"}),t=!1);var a=e("thead",n).length?!0:!1,f=e("tfoot",n).length?!0:!1,l=e("thead tr:first",n),c=e("tbody tr:first",n),h=e("tfoot tr:first",n),p=0;e("th, td",l).each(function(t){p=e(this).width(),e("th:eq("+t+"), td:eq("+t+")",l).css("width",p+"px"),e("th:eq("+t+"), td:eq("+t+")",c).css("width",p+"px"),f&&e("th:eq("+t+"), td:eq("+t+")",h).css("width",p+"px")});if(a)var d=e('<table class="tablescroll_head" cellspacing="0"></table>').insertBefore(r).prepend(e("thead",n));if(f)var v=e('<table class="tablescroll_foot" cellspacing="0"></table>').insertAfter(r).prepend(e("tfoot",n));d!=undefined&&(d.css("width",s+"px"),t&&(e("tr:first th:last, tr:first td:last",d).css("width",p+i.scrollbarWidth+"px"),d.css("width",r.outerWidth()+"px"))),v!=undefined&&(v.css("width",s+"px"),t&&(e("tr:first th:last, tr:first td:last",v).css("width",p+i.scrollbarWidth+"px"),v.css("width",r.outerWidth()+"px")))}),this},e.fn.tableScroll.defaults={flush:!0,width:null,height:100,containerClass:"tablescroll"}}),timely.define("libs/jquery.scrollTo",["jquery"],function(e){function n(e){return typeof e=="object"?e:{top:e,left:e}}var t=e.scrollTo=function(t,n,r){e(window).scrollTo(t,n,r)};t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},t.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return e.browser.safari||r.compatMode=="BackCompat"?r.body:r.documentElement})},e.fn.scrollTo=function(r,i,s){return typeof i=="object"&&(s=i,i=0),typeof s=="function"&&(s={onAfter:s}),r=="max"&&(r=9e9),s=e.extend({},t.defaults,s),i=i||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(i/=2),s.offset=n(s.offset),s.over=n(s.over),this._scrollable().each(function(){function h(e){u.animate(l,i,s.easing,e&&function(){e.call(this,r,s)})}var o=this,u=e(o),a=r,f,l={},c=u.is("html,body");switch(typeof a){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)){a=n(a);break}a=e(a,this);case"object":if(a.is||a.style)f=(a=e(a)).offset()}e.each(s.axis.split(""),function(e,n){var r=n=="x"?"Left":"Top",i=r.toLowerCase(),p="scroll"+r,d=o[p],v=t.max(o,n);if(f)l[p]=f[i]+(c?0:d-u.offset()[i]),s.margin&&(l[p]-=parseInt(a.css("margin"+r))||0,l[p]-=parseInt(a.css("border"+r+"Width"))||0),l[p]+=s.offset[i]||0,s.over[i]&&(l[p]+=a[n=="x"?"width":"height"]()*s.over[i]);else{var m=a[i];l[p]=m.slice&&m.slice(-1)=="%"?parseFloat(m)/100*v:m}s.limit&&/^\d+$/.test(l[p])&&(l[p]=l[p]<=0?0:Math.min(l[p],v)),!e&&s.queue&&(d!=l[p]&&h(s.onAfterFirst),delete l[p])}),h(s.onAfter)}).end()},t.max=function(t,n){var r=n=="x"?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var s="client"+r,o=t.ownerDocument.documentElement,u=t.ownerDocument.body;return Math.max(o[i],u[i])-Math.min(o[s],u[s])}}),timely.define("scripts/calendar/load_views",["jquery","scripts/calendar/print","scripts/calendar/posterboard_view","scripts/calendar/agenda_view","scripts/calendar/month_view","scripts/calendar/pop_up","libs/frontend_utils","ai1ec_calendar","libs/jquery.tablescroller","libs/jquery.scrollTo"],function(e,t,n,r,s,o,u,a){var f="",l,c=function(){var e=document.location.hash,t=u.ai1ec_convert_entities(a.default_hash);if(f!=e&&(e!=""||f!=t)){var n=e;n||(n=t),y(n)}},h=setInterval(c,300),p=function(){clearInterval(h)},d=function(){var u=e("body").attr("class").split(" ");for(i in u){var a=/ai1ec-action-([\w]+)/.exec(u[i]);if(a!=null)break}var f=e("#ai1ec-view-"+a[1]);e("#ai1ec-current-view").contents().remove().end().prepend(f.contents().clone()).append('<span class="caret"></span>'),e("#ai1ec-view-dropdown .dropdown-menu li").removeClass("active"),f.parent().addClass("active"),l=new Array,e(".ai1ec-post-id").each(function(){l.push(this.value)}),l=l.join(),e("table.ai1ec-week-view-original").tableScroll({height:400,containerClass:"ai1ec-week-view"}),e("table.ai1ec-oneday-view-original").tableScroll({height:400,containerClass:"ai1ec-oneday-view"}),e(".ai1ec-active-event:first").length?(e(".ai1ec-month-view .ai1ec-active-event:first, .ai1ec-oneday-view .ai1ec-active-event:first, .ai1ec-week-view .ai1ec-active-event:first").each(function(){e(this).each(o.show_popup).prev().data("ai1ec_mouseinside",!0)}),e(".ai1ec-agenda-view .ai1ec-active-event:first > .ai1ec-event-summary").each(r.expand_event),e.scrollTo(".ai1ec-active-event:first",1e3,{offset:{left:0,top:-window.innerHeight/2+100}})):(e(".ai1ec-week-view").length||e(".ai1ec-oneday-view").length)&&e(".ai1ec-oneday-view .tablescroll_wrapper, .ai1ec-week-view .tablescroll_wrapper").scrollTo(".ai1ec-hour-marker:eq(6)"),e(".ai1ec-dropdown.active").length&&(e(".ai1ec-month-view .ai1ec-event-container,.ai1ec-oneday-view .ai1ec-event-container,.ai1ec-week-view .ai1ec-event-container,.ai1ec-agenda-view .ai1ec-event,.ai1ec-posterboard-view .ai1ec-event").hide(),m()),e(".ai1ec-month-view .ai1ec-multiday").length&&(s.revert_multiday_events(),s.extend_multiday_events(),e(".ai1ec-month-view .ai1ec-week td:first-of-type .ai1ec-popup-summary-wrap").addClass("ai1ec-popup-summary-right")),e(".ai1ec-popup-summary").each(function(){var t=-(e(this).height()/2+13);e(this).css("margin-top",t)}),e(".ai1ec-posterboard-view").length&&n.initialize_masonry(),t.toggle_print_button()},v=function(t){var n=!1;return t.find("ol.ai1ec-date-events li.ai1ec-event").each(function(){e(this).css("display")!="none"&&(n=!0)}),n},m=function(){var t=new Array,r=e(".ai1ec-filters-container .ai1ec-dropdown.active + #ai1ec-selected-categories").val();r?(t.push(r),r="&ai1ec_cat_ids="+r):r="";var i=e(".ai1ec-filters-container .ai1ec-dropdown.active + #ai1ec-selected-tags").val();i?(t.push(i),i="&ai1ec_tag_ids="+i):i="",t=t.join();var o=u.ai1ec_convert_entities(a.export_url);t.length?(o+=r+i,e(".ai1ec-subscribe-filtered").fadeIn("fast")):e(".ai1ec-subscribe-filtered").fadeOut("fast"),e(".ai1ec-subscribe").attr("href",o),e(".ai1ec-subscribe-google").attr("href","http://www.google.com/calendar/render?cid="+escape(o.replace("webcal://","http://")));var f={action:"ai1ec_term_filter",ai1ec_post_ids:l,ai1ec_term_ids:t},c=e("#ai1ec-calendar-view-loading").delay(500).fadeIn("fast"),h=e("#ai1ec-calendar-view").delay(500).fadeTo("fast",.3);e.post(a.ajaxurl,f,function(t){c.clearQueue().fadeOut("fast"),h.clearQueue().fadeTo("fast",1);var r=[];e.each(t.matching_ids,function(e,t){r.push("#ai1ec-calendar-view .ai1ec-event-id-"+t)}),e(r.join()).css("display","block"),r=[],e.each(t.unmatching_ids,function(e,t){r.push("#ai1ec-calendar-view .ai1ec-event-id-"+t)}),e(r.join()).css("display","none"),e("ol.ai1ec-agenda-view > li.ai1ec-date").each(function(){v(e(this))?e(this).slideDown("fast"):e(this).slideUp("fast")}),e(".ai1ec-month-view .ai1ec-multiday").length&&(s.revert_multiday_events(),s.extend_multiday_events()),e(".ai1ec-posterboard-view").length&&n.reload_masonry()},"json")},g=function(){e(".ai1ec-filter-selector-container").each(function(){e("li.ai1ec-selected",this).length?e(".ai1ec-dropdown",this).addClass("active btn-info"):e(".ai1ec-dropdown",this).removeClass("active btn-info")}),e(".ai1ec-filters-container .ai1ec-selected").length?e(".ai1ec-clear-filters").fadeIn("fast"):e(".ai1ec-clear-filters").fadeOut("fast"),m()},y=function(t){e("#ai1ec-calendar-view-loading").fadeIn("fast"),e("#ai1ec-calendar-view").fadeTo("fast",.3,function(){var n=t.substring(1);e.post(a.ajaxurl,n,function(t){var n=e("body").attr("class");n=n.replace(/\s?\bai1ec-[\w-]+\b/g,""),n+=" "+t.body_class,e("body").attr("class",n);var r=e("#ai1ec-calendar-view-container");r.height(r.height());var i=e("#ai1ec-calendar-view").html(t.html).height();r.animate({height:i},{complete:function(){r.height("auto")}}),e("#ai1ec-calendar-view-loading").fadeOut("fast"),e("#ai1ec-calendar-view").fadeTo("fast",1),d()},"json")}),f=t},b=function(){y(e(this).attr("href"))},w=function(){e(".ai1ec-filter-selector-container li").removeClass("ai1ec-selected"),g()},E=function(){var t=e("#ai1ec-selected-categories").val(),n=e("#ai1ec-selected-tags").val();(typeof t=="string"&&t!=""||typeof n=="string"&&n!="")&&g()},S=function(t){var n="ai1ec-selected",r=e(this).closest("div"),i=r.hasClass("ai1ec-category-filter-selector")?"#ai1ec-selected-categories":"#ai1ec-selected-tags",s=r.hasClass("ai1ec-category-filter-selector")?"ai1ec-categories":"ai1ec-tags",o=[];e(this).hasClass(n)?e(this).removeClass(n):e(this).addClass(n),e("li."+n,r).each(function(){var t=e(this).find('input[name="'+s+'"]:first').val();o.push(t)}),e(i).val(o.join())},x=function(t,n,r){var i="ai1ec-selected",s=e(r).val();if(s!=undefined&&s!=""){var o=s.split(",");e(o).each(function(e,t){o[e]='input[name="'+n+'"][value="'+t+'"]'}),o=o.join(),e(t).has(o).addClass(i)}};return{initialize_view:d,handle_click_on_link_to_load_view:b,update_filter_selectors:g,clear_filters:w,initialize_filters:E,handle_click_on_tag_category:S,pre_select_tag_categories_if_set:x,clear_interval:p}}),timely.define("scripts/calendar",["jquery","domReady","scripts/calendar/load_views","scripts/calendar/pop_up","scripts/calendar/print","scripts/calendar/agenda_view","scripts/calendar/posterboard_view","libs/modernizr","ai1ec_calendar"],function(e,t,n,r,i,s,o,u,a){var f=function(){if(a.selector!==undefined&&a.selector!==""&&e(a.selector).length===1){var t=e(":header:contains("+a.title+"):first");t.length||(t=e('<h1 class="page-title"></h1>'),t.text(a.title));var n=e("#ai1ec-container").detach().before(t);e(a.selector).empty().append(n).hide().css("visibility","visible").fadeIn("fast")}},l=function(){var t=e("body").attr("class");t==undefined&&(t=""),t.match(/\s?\bai1ec-[\w-]+\b/)==null&&(t+=" "+a.body_class,e("body").attr("class",t))},c=function(){f(),l()},h=function(){e(window).on("click","a.ai1ec-load-view",n.handle_click_on_link_to_load_view),e(window).blur(r.hide_popup_on_windows_blur_event),e(".ai1ec-oneday-view .ai1ec-event, .ai1ec-week-view .ai1ec-event").live(u.touch?"click":"mouseenter",r.show_popup),u.touch||e(".ai1ec-event-popup, .ai1ec-oneday-view .ai1ec-event-popup, .ai1ec-week-view .ai1ec-event-popup").live("mouseleave",r.hide_popup).live("mousemove",r.set_data_on_active_popup),e(".ai1ec-oneday-view .ai1ec-oneday a.ai1ec-event-container, .ai1ec-week-view .ai1ec-week a.ai1ec-event-container").live("mouseenter",function(){e(this).delay(500).queue(function(){e(this).css("z-index",5)})}).live("mouseleave",function(){e(this).clearQueue().css("z-index","auto")}),e(window).on("click",".ai1ec-agenda-view .ai1ec-event-click",s.toggle_event),e(window).on("click",".ai1ec-action-agenda #ai1ec-expand-all",s.expand_all),e(window).on("click",".ai1ec-action-agenda #ai1ec-collapse-all",s.collapse_all),e(window).on("load",o.reload_masonry),e(".ai1ec-category-filter-selector li, .ai1ec-tag-filter-selector li").click(n.handle_click_on_tag_category),e(".ai1ec-filter-selector li").click(n.update_filter_selectors),e(".ai1ec-clear-filters").click(n.clear_filters),e("#ai1ec-print-button").click(i.handle_click_on_print_button)},p=function(){t(function(){c(),h(),n.pre_select_tag_categories_if_set(".ai1ec-tag-filter-selector li","ai1ec-tags","#ai1ec-selected-tags"),n.pre_select_tag_categories_if_set(".ai1ec-category-filter-selector li","ai1ec-categories","#ai1ec-selected-categories"),n.initialize_filters(),n.initialize_view()})};return{start:p}});